gradle.allprojects { ext.getDate = { return getDateImpl(); } }
gradle.allprojects { ext.gitSha = { return gitShaImpl(); } }

def getDateImpl() {
    def date = new Date()
    def formattedDate = date.format('yyyyMMdd')
    return formattedDate
}

def gitShaImpl() {
    try {
        return 'git rev-parse --short HEAD'.execute().text.trim()
    } catch (any) {
        throw new Exception("!!! Unable to execute 'git' => Git is not part of your system path !!!");
    }
}